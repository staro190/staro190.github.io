<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Orbit of Learning</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="./css/style.css">
  <style>
    body { margin:0; overflow-x:hidden; background:#000; color:#fff; font-family:sans-serif; }
    .center-menu { 
      position:absolute; 
      top:20%; /* 화면 중앙보다 조금 위로 */
      left:50%; 
      transform:translate(-50%, -50%); 
      text-align:center; 
      z-index:10; 
    }
    .center-menu h1 { font-size:3em; margin-bottom:20px; }
    .center-menu nav a { margin:0 15px; color:#fff; text-decoration:none; font-size:1.2em; }
    canvas { display:block; }
  </style>
</head>
<body>
  <!-- 배경 파티클 -->
  <canvas id="bg"></canvas>

  <!-- 중앙 메뉴 -->
  <div class="center-menu">
    <h1>Orbit of Learning</h1>
    <nav>
      <a href="about.html">About</a>
      <a href="cs_main.html">Computer Science</a>
      <a href="contact.html">Contact</a>
    </nav>
  </div>

  <!-- 하단 궤도 캔버스 -->
  <canvas id="orbitCanvas" style="position: fixed; bottom:10%; left:0; width:100%; height:200px; z-index:5;"></canvas>

  <!-- 배경 파티클 JS -->
  <script>
    const bgCanvas = document.getElementById('bg');
    const bgCtx = bgCanvas.getContext('2d');
    let particles = [];

    function initCanvas(){
      bgCanvas.width = window.innerWidth;
      bgCanvas.height = window.innerHeight;
      initParticles();
    }

    function initParticles(){
      particles = [];
      const particleCount = 80;
      for(let i=0;i<particleCount;i++){
        particles.push({
          x: Math.random()*bgCanvas.width,
          y: Math.random()*bgCanvas.height,
          vx: (Math.random()-0.5)*0.5,
          vy: (Math.random()-0.5)*0.5,
          size: Math.random()*2 + 1
        });
      }
    }

    function drawParticles(){
      bgCtx.clearRect(0,0,bgCanvas.width,bgCanvas.height);
      bgCtx.fillStyle = "#00d4ff";
      particles.forEach(p=>{
        p.x += p.vx;
        p.y += p.vy;

        if(p.x<0) p.x=bgCanvas.width;
        if(p.x>bgCanvas.width) p.x=0;
        if(p.y<0) p.y=bgCanvas.height;
        if(p.y>bgCanvas.height) p.y=0;

        bgCtx.beginPath();
        bgCtx.arc(p.x,p.y,p.size,0,Math.PI*2);
        bgCtx.fill();
      });
      requestAnimationFrame(drawParticles);
    }

    window.addEventListener('resize', initCanvas);
    initCanvas();
    drawParticles();
  </script>

  <!-- 하단 궤도 + 아이콘 JS -->
  <script>
    const orbitCanvas = document.getElementById('orbitCanvas');
    const oCtx = orbitCanvas.getContext('2d');

    let centerX = orbitCanvas.width / 2;
    let centerY = orbitCanvas.height / 2;

    const orbits = [
      { radius: 40, speed: 0.02, angle: 0, icon: 'memory', link: 'ai.html' },     
      { radius: 70, speed: 0.015, angle: Math.PI/2, icon: 'computer', link: 'cs_main.html' },
      { radius: 100, speed: 0.01, angle: Math.PI, icon: 'shield', link: 'cyber.html' }
    ];

    const colors = ['#00d4ff', '#ff6fff', '#ffd700'];

    let mouseX = -1000, mouseY = -1000;
    let isPaused = false;

    orbitCanvas.addEventListener('mousemove', (e)=>{
      const rect = orbitCanvas.getBoundingClientRect();
      mouseX = e.clientX - rect.left;
      mouseY = e.clientY - rect.top;
    });

    orbitCanvas.addEventListener('mouseenter', ()=>{ isPaused = true; });
    orbitCanvas.addEventListener('mouseleave', ()=>{
      isPaused = false;
      mouseX = -1000; mouseY = -1000;
    });

    function drawOrbit() {
      oCtx.clearRect(0,0,orbitCanvas.width, orbitCanvas.height);

      orbits.forEach((o,i)=>{
        // 궤도 원
        oCtx.beginPath();
        oCtx.strokeStyle = 'rgba(255,255,255,0.2)';
        oCtx.arc(centerX, centerY, o.radius, 0, Math.PI*2);
        oCtx.stroke();

        // 점 위치
        const x = centerX + o.radius * Math.cos(o.angle);
        const y = centerY + o.radius * Math.sin(o.angle);

        // 점 그리기 (크기 크게)
        oCtx.beginPath();
        oCtx.arc(x, y, 10, 0, Math.PI*2); // 점 크기 10
        oCtx.fillStyle = colors[i % colors.length];
        oCtx.fill();

        // 아이콘 마우스 오버 확대 + 글로우
        const distance = Math.hypot(mouseX - x, mouseY - y);
        let iconSize = 24; // 기본 아이콘 작게
        oCtx.shadowBlur = 0;
        if(distance < 32){
          iconSize = 36; // 마우스 오버 시 확대
          oCtx.shadowColor = '#fff';
          oCtx.shadowBlur = 20;
        }

        // Material Icon 그리기
        oCtx.font = iconSize + 'px Material Icons';
        oCtx.textAlign = 'center';
        oCtx.textBaseline = 'middle';
        oCtx.fillStyle = '#fff';
        oCtx.fillText(o.icon, x, y);

        // 회전 업데이트
        if(!isPaused) o.angle += o.speed;
      });

      requestAnimationFrame(drawOrbit);
    }

    drawOrbit();

    // 클릭 이벤트
    orbitCanvas.addEventListener('click', (e)=>{
      const rect = orbitCanvas.getBoundingClientRect();
      const clickX = e.clientX - rect.left;
      const clickY = e.clientY - rect.top;

      orbits.forEach(o=>{
        const x = centerX + o.radius * Math.cos(o.angle);
        const y = centerY + o.radius * Math.sin(o.angle);
        const distance = Math.hypot(clickX - x, clickY - y);
        if(distance < 24){
          window.location.href = o.link;
        }
      });
    });

    function resizeOrbitCanvas(){
      const dpr = window.devicePixelRatio || 1;
    
      // 캔버스 실제 픽셀 수
      orbitCanvas.width = window.innerWidth * dpr;
      orbitCanvas.height = 200 * dpr;
    
      // CSS 크기
      orbitCanvas.style.width = window.innerWidth + 'px';
      orbitCanvas.style.height = '200px';
    
      // 컨텍스트 스케일 조정
      oCtx.setTransform(1, 0, 0, 1, 0, 0); // 초기화
      oCtx.scale(dpr, dpr);
    
      // 중심점 업데이트 (CSS 기준 좌표)
      centerX = window.innerWidth / 2;
      centerY = 100; 
    }
    
    // 초기화
    resizeOrbitCanvas();
    
    // 반응형
    window.addEventListener('resize', ()=>{
      orbitCanvas.width = window.innerWidth;
      orbitCanvas.height = 200;
      centerX = orbitCanvas.width / 2;
      centerY = orbitCanvas.height / 2;
    });
  </script>
</body>
</html>
