<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>SVG Animation Test</title>
    <style>
        body { background-color: #222; display: grid; place-content: center; height: 100vh; }
        svg { border: 1px solid #555; }
        button { margin-top: 20px; padding: 10px 20px; font-size: 16px; }

        /* 궤적 애니메이션을 위한 필수 CSS */
        .test-trail {
            stroke-width: 3px;
            stroke: #00aaff;
            fill: none;
            /* ★★★ 이 transition이 핵심입니다 ★★★ */
            transition: stroke-dashoffset 1s linear;
        }
    </style>
</head>
<body>

    <svg id="test-svg" width="300" height="200"></svg>
    <button id="test-btn">애니메이션 시작</button>

    <script>
        const svg = document.getElementById('test-svg');
        const btn = document.getElementById('test-btn');

        function testDraw() {
            // 기존 SVG 내용 초기화
            svg.innerHTML = '';

            // 1. SVG 경로(path) 요소 생성
            const trail = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            trail.setAttribute('d', 'M 50 50 L 250 150'); // 대각선 경로
            trail.classList.add('test-trail');
            svg.appendChild(trail);

            // 2. 경로 길이 계산 및 보이지 않게 초기화
            const length = trail.getTotalLength();
            trail.style.strokeDasharray = length;
            trail.style.strokeDashoffset = length;

            // 3. 다음 프레임에 애니메이션 시작
            requestAnimationFrame(() => {
                trail.style.strokeDashoffset = 0;
            });
        }

        btn.addEventListener('click', testDraw);
    </script>
</body>
</html>